# Checks for required .nuspec file and creates package.
# Pipelines have to run the `nuget pack` task differently based on if the package is in alpha/preview or stable.

steps:
- task: NuGetCommand@2
  displayName: 'Run `nuget pack`'
  inputs:
    command: pack
    packagesToPack: '$(WorkingDirectory)\*.nuspec'
    packDestination: '$(Build.ArtifactStagingDirectory)\outputpackages'
    versioningScheme: 'byEnvVar'
    versionEnvVar: '$[dependencies.Versioning.outputs[''NugetPackageVersion'']]'

- template: nuget-build-artifacts-steps.yml